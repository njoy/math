#ifndef MATH_IMPLEMENTATION_PROBABILITYDISTRIBUTION_HPP
#define MATH_IMPLEMENTATION_PROBABILITYDISTRIBUTION_HPP

#include "math/API/ProbabilityDistribution.hpp"
#include "math/implementation.hpp"

namespace math{
namespace implementation{

/**
 * @tparam PDFFunctor 
 * A univariate functor that describes the probability density function
 * @tparam CDFFunctor 
 * A univariate functor that describes the cumulative distribution function
 */
template<typename PDFFunctor, typename CDFFunctor>
class ProbabilityDistribution final : public math::API::ProbabilityDistribution {
public:
  /* constructor and destructor*/
  ProbabilityDistribution(PDFFunctor&& PDF, CDFFunctor&& CDF) :
    pdf( std::move(PDF) ), cdf( std::move(CDF) ){}

  ProbabilityDistribution( const ProbabilityDistribution& ) = default;

  ProbabilityDistribution( ProbabilityDistribution&& ) = default;

  ~ProbabilityDistribution() = default;  

  /* methods */
  /** @return The probability density at the @p event value */
  double
  probabilityDensity(const double event) const final {
    return this->pdf(event);
  }

  /** @return The cumulative probability at the @p event value*/
  double
  cumulativeProbability(const double event) const final {
    return this->cdf(event);
  }

  /* fields */
  PDFFunctor pdf;
  CDFFunctor cdf;
};

}
}
#endif // MATH_IMPLEMENTATION_PROBABILITYDISTRIBUTION_HPP

